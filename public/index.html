<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡¶¨‡¶ø‡¶°‡¶ø - ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶§‡¶æ</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2654/2654518.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Hind Siliguri', sans-serif; background-color: #f8fafc; color: #08c0ee; -webkit-tap-highlight-color: transparent; }
        .active-tab { color: #6366f1; border-bottom: 3px solid #6366f1; }
        .hidden { display: none; }
        /* Premium Gradient Logo & Cards */
        .logo-box { background: linear-gradient(135deg, #FFD700 0%, #FF8C00 50%, #FF4500 100%); }
        .card-shadow { box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05); }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen">

    <!-- LOGIN SCREEN -->
    <div id="screen-login" class="hidden flex flex-col items-center justify-center min-h-screen p-8 bg-slate-900">
        <!-- Modern Logo -->
        <div class="w-24 h-24 logo-box rounded-[2.5rem] flex items-center justify-center shadow-2xl mb-6 border-4 border-white/10">
            <span class="text-white text-5xl font-black">‡¶π</span>
        </div>
        <h1 class="text-4xl font-black text-white mb-2 tracking-tight">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡¶¨‡¶ø‡¶°‡¶ø</h1>
        <p class="text-slate-400 mb-10 text-center text-sm">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶ñ‡¶æ‡¶§‡¶æ</p>
        
        <div class="w-full space-y-4">
            <input id="login-phone" type="tel" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡ß¶‡ßß...)" class="w-full p-5 bg-slate-800 border border-slate-700 text-white rounded-3xl outline-none focus:border-orange-500 transition-all">
            <input id="login-shop-name" type="text" placeholder="‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" class="w-full p-5 bg-slate-800 border border-slate-700 text-white rounded-3xl outline-none focus:border-orange-500 transition-all">
            <input id="login-pin" type="password" maxlength="4" placeholder="‡ß™ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶™‡¶ø‡¶® (PIN)" class="w-full p-5 bg-slate-800 border border-slate-700 text-white rounded-3xl outline-none text-center text-2xl tracking-[1em]">
            <button onclick="handleAuth()" class="w-full bg-orange-500 text-white py-5 rounded-3xl font-bold text-xl shadow-lg active:scale-95 transition-all">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <!-- MAIN APP SHELL -->
    <div id="screen-main" class="hidden pb-24">
        <!-- Modern Header -->
        <header class="bg-white px-6 py-6 flex justify-between items-center sticky top-0 z-50 shadow-sm">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-2xl overflow-hidden bg-slate-100 border-2 border-indigo-100">
                    <img id="display-profile-img" src="https://ui-avatars.com/api/?name=Shop&background=6366f1&color=fff" class="w-full h-full object-cover">
                </div>
                <div>
                    <h2 id="display-shop-name" class="text-lg font-black text-slate-800 leading-tight">‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</h2>
                    <div class="flex items-center gap-1">
                        <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
                        <span class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï</span>
                    </div>
                </div>
            </div>
            <div class="w-10 h-10 logo-box rounded-xl flex items-center justify-center shadow-md">
                <span class="text-white font-bold text-xl">‡¶π</span>
            </div>
        </header>

        <main class="p-5">
            <!-- DASHBOARD VIEW -->
            <div id="view-dashboard">
                <div class="bg-slate-900 p-8 rounded-[2.5rem] text-white shadow-xl mb-8 relative overflow-hidden">
                    <div class="absolute -right-5 -top-5 w-24 h-24 logo-box opacity-10 rounded-full"></div>
                    <p class="opacity-60 text-xs font-bold uppercase tracking-widest mb-1">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶®‡¶ø‡¶ü ‡¶≤‡¶æ‡¶≠</p>
                    <h2 id="todayProfit" class="text-5xl font-black">‡ß≥ ‡ß¶</h2>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="bg-white p-5 rounded-[2rem] shadow-sm border border-slate-100 text-center">
                        <p class="text-slate-400 text-[10px] font-bold uppercase mb-1">‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø (+)</p>
                        <p id="todaySale" class="text-xl font-black text-emerald-600">‡ß≥ ‡ß¶</p>
                    </div>
                    <div class="bg-white p-5 rounded-[2rem] shadow-sm border border-slate-100 text-center">
                        <p class="text-slate-400 text-[10px] font-bold uppercase mb-1">‡¶ñ‡¶∞‡¶ö (-)</p>
                        <p id="todayExpense" class="text-xl font-black text-rose-600">‡ß≥ ‡ß¶</p>
                    </div>
                </div>

                <!-- Fast Input Section -->
                <div class="bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-50 mb-10 text-center">
                    <input id="amount" type="number" inputmode="decimal" placeholder="‡ß≥ ‡ß¶.‡ß¶‡ß¶" class="w-full text-5xl font-black text-center mb-6 outline-none text-indigo-600 placeholder:text-slate-100">
                    
                    <div class="space-y-3 mb-8">
                        <input id="customer" type="text" placeholder="üë§ ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶ï‡¶ø ‡¶π‡¶≤‡ßá)" class="w-full px-5 py-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 ring-indigo-500/10">
                        <input id="note" type="text" placeholder="üìù ‡¶®‡ßã‡¶ü (‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß® ‡¶ï‡ßá‡¶ú‡¶ø ‡¶ö‡¶ø‡¶®‡¶ø)" class="w-full px-5 py-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 ring-indigo-500/10">
                    </div>

                    <div class="grid grid-cols-7 gap-3">
                        <button onclick="addEntry('sale')" class="col-span-3 bg-emerald-500 text-white py-5 rounded-[1.5rem] font-bold shadow-lg active:scale-95 transition-all">‡¶®‡¶ó‡¶¶ (+)</button>
                        <button onclick="addEntry('baki')" class="col-span-2 bg-amber-500 text-white py-5 rounded-[1.5rem] font-bold shadow-lg active:scale-95 transition-all text-sm">‡¶¨‡¶æ‡¶ï‡¶ø</button>
                        <button onclick="addEntry('expense')" class="col-span-2 bg-rose-500 text-white py-5 rounded-[1.5rem] font-bold shadow-lg active:scale-95 transition-all text-sm">‡¶ñ‡¶∞‡¶ö</button>
                    </div>
                </div>

                <h3 class="font-bold text-slate-400 text-xs uppercase mb-4 ml-2 tracking-widest">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®</h3>
                <div id="historyList" class="space-y-4"></div>
            </div>

            <!-- BAKI VIEW (LEND) -->
            <div id="view-baki" class="hidden">
                <div class="bg-amber-500 p-8 rounded-[2.5rem] text-white mb-8 shadow-xl text-center">
                    <p class="opacity-80 text-sm font-bold mb-1">‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶™‡¶æ‡¶ì‡¶®‡¶æ</p>
                    <h2 id="totalBaki" class="text-4xl font-black">‡ß≥ ‡ß¶</h2>
                </div>
                <div id="customerList" class="space-y-4"></div>
            </div>

            <!-- REPORT VIEW (NEW) -->
            <div id="view-report" class="hidden">
                <div class="bg-white p-8 rounded-[2.5rem] shadow-lg border border-slate-100 mb-8">
                    <h3 class="font-bold text-slate-800 mb-4">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h3>
                    <input type="date" id="report-date" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border border-slate-100 focus:ring-2 ring-indigo-500/20 mb-4">
                    <button onclick="filterTransactionsByDate()" class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold">‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                </div>
                <div id="reportSummary" class="hidden bg-indigo-900 text-white p-6 rounded-3xl mb-6 text-center">
                    <p class="opacity-70 text-xs">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶≤‡¶æ‡¶≠</p>
                    <h2 id="reportProfit" class="text-3xl font-black">‡ß≥ ‡ß¶</h2>
                </div>
                <div id="reportList" class="space-y-4"></div>
            </div>

            <!-- PROFILE VIEW -->
            <div id="view-profile" class="hidden">
                <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 mb-6 text-center">
                    <div class="relative w-24 h-24 mx-auto mb-6">
                        <img id="profile-img-preview" src="https://ui-avatars.com/api/?name=User" class="w-24 h-24 rounded-[2rem] object-cover border-4 border-slate-50">
                        <label for="img-upload" class="absolute -bottom-2 -right-2 bg-indigo-600 text-white p-2 rounded-full cursor-pointer shadow-lg">üì∏</label>
                        <input type="file" id="img-upload" class="hidden" accept="image/*" onchange="uploadImage(this)">
                    </div>
                    
                    <div class="space-y-4 text-left">
                        <div>
                            <label class="text-[10px] font-bold text-slate-400 uppercase ml-2 tracking-widest">‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                            <input id="edit-shop-name" type="text" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 ring-indigo-500/10 font-bold">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-slate-400 uppercase ml-2 tracking-widest">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                            <input id="edit-bazaar-name" type="text" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ö‡¶ï ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 ring-indigo-500/10">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-slate-400 uppercase ml-2 tracking-widest">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
                            <input id="edit-address" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 ring-indigo-500/10">
                        </div>
                        <button onclick="updateProfileInfo()" class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg">‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </div>
                </div>
                <button onclick="handleLogout()" class="w-full py-4 text-rose-500 font-bold text-sm">‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </main>

        <!-- Bottom Navigation Bar -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white/80 glass border-t border-slate-100 flex justify-around p-4 max-w-md mx-auto z-50">
            <button onclick="switchTab('dashboard')" id="nav-dashboard" class="flex-1 flex flex-col items-center gap-1 active-tab">
                <span class="text-lg">üè†</span>
                <span class="text-[10px] font-bold uppercase tracking-tighter">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</span>
            </button>
            <button onclick="switchTab('baki')" id="nav-baki" class="flex-1 flex flex-col items-center gap-1 text-slate-300">
                <span class="text-lg">üë•</span>
                <span class="text-[10px] font-bold uppercase tracking-tighter">‡¶¨‡¶æ‡¶ï‡¶ø</span>
            </button>
            <button onclick="switchTab('report')" id="nav-report" class="flex-1 flex flex-col items-center gap-1 text-slate-300">
                <span class="text-lg">üìä</span>
                <span class="text-[10px] font-bold uppercase tracking-tighter">‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</span>
            </button>
            <button onclick="switchTab('profile')" id="nav-profile" class="flex-1 flex flex-col items-center gap-1 text-slate-300">
                <span class="text-lg">üë§</span>
                <span class="text-[10px] font-bold uppercase tracking-tighter">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
            </button>
        </nav>
    </div>

    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- App Logic -->
    <script src="app.js"></script>
</body>
</html>